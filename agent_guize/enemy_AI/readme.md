运行说明：
把auto_test文件夹放在AI_test_2024根目录下，运行main.py

========================================================================================
主分支先弄一个基础版本的AI Demo，后面各种测试用例再开相应的分支就比较好。顺利的话下午就可以开始测开火

后续应该安排一个请人鉴定，就是说找一个完全没参与的人，来部署使用一遍，如果好使了，就没事儿了。如果不好使，就得看是因为什么。

一个比较理想的情况是，框架先拉通，然后等那边有了之后再来测试。

发布之前画个类图。反正也没多复杂。

琢磨一下，开始之前是否有必要做一个映射。别整那种后面一大堆的小数的2.71001

平台的冗余文件太多了，还能翻到世界地图和省市县地图。

========================================================================
2024年8月8日测试
1，似乎不发弹了，不知道是为什么。测试程序是在去年的基础上改的。初步破案：近距离不通视了，一方面可能是程序有问题，另一方面也说明现在的大块不通视、大块不可见的设定是有问题的。
2，现在这版前端会闪退。Qt也会闪退，老问题了。
3，现在这版看起来动不了，前端后端应该都动不了

========================================================================

2024年8月9日测试
1，会跑死在奇怪的地方。move仍然动不了。炮是能打的了，穿甲弹也确实能穿到东西。


========================================================================
2024年8月19日，经历了很大的一轮停滞，得给它重新弄起来。目前看情况不妙，能调动的人力甚至少于1个，连自己的时间都保证不了。
1，继续开火移动。后端看着确实是数字变了，但是前端没动静。定位不准似乎，不能准确走到指定的点。
2，干扰能不能起作用。得加一个“干扰车不能被干扰”的逻辑在其中。得弄一个"global不能下命令给被干扰装备"的机制在里面。21点52分，干扰测试python端弄完了，现在是"被干扰就跑“实现了，但是还差一些对接。
3，沿着路移动这个事情没有实现。
4，运行速度为什么这么慢？这电脑理论上比去年好很多。
5，其实可以把场景集里面那个并行的机制搞过来，但是暂时似乎是没必要的。

一个问题：干扰车要是新加一个类型那么毁伤啥的全都得重新写一遍，所有带if else的地方都是如此。这样的程序结构是不利于维护的，按说应该全工程只来一个种类列表，别的地方都按照这个循环，就好一些。现在的解决方案是偷懒，把它配成装甲车类型。

=======================================================================
2024年8月20日，一边开着并行一边调试并不十分现实，太卡了顶不住。那边点个断点先停下来效果是比较好的。
1，干扰开了之后标志位没有变。阳哥现在实现的这个版本的干扰似乎只干扰电磁啥的，用的是最省事的办法。基本破案了，就是每次传标志的时候都已经被reset掉了。合理的该法应该是继承上一步的状态，然后每一步都裁决。一直折腾到晚上之后这个算是完事儿了，难顶。
2，巡飞弹吃了干扰之后没有原地自毁，还得琢磨一下是怎么回事儿。20点28分破案了，是因为无人机上面没有正经传感器，只有一个奇奇怪怪的PID。那改JSON说不定就行。这个搞完还有别的问题，又是自己gostep一下之后直接把标志位清了。这个算是改好了，但是还没最终测试。
3，巡飞弹的毁伤还没写，那也得写。摇人来弄可能会比较好。

一个问题：阳哥那边要求前端的输入。
===========================================================================
2024年8月21日。先把巡飞弹消失弄了，然后再弄巡飞弹毁伤和接口
1,阳哥给改那版就没进去，估计前面啥地方过滤掉了，得找。找到了，发弹得再给他连起来才好使。好，一系列排故之后好使了。
2，自行手动把巡飞弹的毁伤写了，顺便修了之前剩下的BUG。具备了纳入到统一的开火测试的条件了。
===========================================================================
2024年8月22日。不行就自己动手丰衣足食了。
1，一样一样的来，先研究一下怎么加入越野状态。14点25分，几乎算是加完了。
2，一样一样的来，研究完越野之后自己写一个越野的缓慢的。14点25分，几乎算是加完了。20点36分算是测完了，能够正确生成出traj3D，而且确实是动起来了，鉴定为好。。
3，gostep有毒，会改标志位。20点36分修好了
===========================================================================
2024年8月23日。能做的工作量还有很多，包括但不限于修改通视，体现出隐蔽的效果，尤其是步兵。增加进房子，体现出进房子的效果，估计带房子的毁伤也得好好调整。

1，给步兵也把越野机制加了，不然到时候反而变成只有步兵不能越野，就比较傻逼。一个值得讨论的问题：步兵是不是应该默认状态就是能走野外的？总之哪头都能说，先把越野机制建立出来。09点46分真的抽象，去年的步兵从代码里看根本就无法切换状态
2，落实一下越野速度的影响，越野统一设定为只有一半速度好了。
===========================================================================
2024年8月26日。进房子还没弄，道路机动还没弄。前端的也还没给出去。
===========================================================================
2024年8月27日。注意到，红方部署太多了会把蓝方的坐标淹了，这样是不好的。

1，算是把进房子机制给加了，现在能进房子能出房子，但是还没有测到在房子里的伤害。21点54分测到了，进房子相比不进房子能够多抗四五发高爆弹，1、2 VS 6，鉴定为好。
2，看起来应该加一个设定，步兵在房子里能够免疫子弹，听起来不是十分合理的吗。22点09分改了。
3，通视有问题，现在默认全都不通视，这打起来能命中个锤子。合理推测是因为这个才打不上的之前。这个明日再议
4，要搞友军伤害吗？高爆弹其实有友军伤害比较合理，也不难弄，但是可能没有必要。
5，目前代码里，进房子和隐藏是叠加的，如果进房子且隐藏，那么将会极其难杀。
6，恐怕应该多给点无人机，然后步兵藏房子里才有意义。再来点导弹威力巨大的设定，甚至设为必杀。

==========================================================================
2024年8月28日了，赶紧的，搞一些图看看情况。
1，按说房子是没有阵营的。不过现在这版好像也没有检测进房子是不是同阵营。希望是让它都能进。done。改JSON也算是改完了已经
2，“开了干扰全图可见”这个机制还没有做出来。这个问问阳哥他们怎么写。
3，测通视，看到底是为什么不通视。100米眼睛看不见，那显然是不对的。破案了，算通视线的时候高度被置为0了，所以吃了地球曲率的亏。还是得加模型高度。经过测试，确实是因为这个。改了之后就能看到了。
4，探测概率那个，地形和状态应该改变的是探测距离，只改概率变成早晚几秒探到，讲道理意义就不是很大了。22点01分改好了算是
5，为何炮能够移动开火仍未破案。

==========================================================================
2024年9月3日了，蓝方部署没出来，不知道为啥。态势里有的，坐标也没出地图，但是前端没有显示。

==========================================================================
2024年9月4日了，现在重新装了两台比较好的电脑还是舒服的。
1，蓝方导弹车部署还没改。改了，但是后端没有很好地部署上，还得调试一番。
2，打炮似乎没正常打出来不知道为啥。确实就是没打出来。难顶了。
3，现在前端显示的貌似是红方视角，那显然是不对的嘛。
4，遗留问题：部署到地图外面之后导弹还能发射吗？

==========================================================================
2024年9月5日了，今天要解决的问题。改速度，改部署，改前端。让导弹车不移动
1，打炮打出来了还是。但是打移动目标还是不太打得到。
2，已查明改速度得去speedtable里。速度为0就是不吃这个命令。那个是km/h
3，鉴定为寄，不上车了。修好了。JSON里的ID拼写错误，只能将错就错。然后折腾发现是ID匹配的不对，改了之后车那头是对了，问题变成步兵不从态势里消失。units.remove(infantryid_);
4，改射程在哪改？还有探测距离。
5，还得专门测一下打导弹。这个得有说法的哇。还有导弹车的概率,弄了。21点42分进了发弹了，python态势里也有弹，前端里面只是飞的慢。好，那么目前来看攻防的导弹都是打的。
6，不行就加强蓝方，让蓝方除了现有兵力，再初始在每个房子都有兵力。然后要不就搞成导弹不毁伤防空阵地，防空反导不毁伤无人机。
7，前端和后端的延迟比较长。
8，巡飞弹显示为未知类型舰船，而且无法移动。上车之后也不移动了简直了。21点53分这个时候
9，仿真速度这茬要提上日程了，不然真玩不了。

============================================================================
2024年9月6日，今天要解决的问题，改前端，改探测范围，修各种bug。还得测一下纯打穿甲弹行不行。

1，由于传数的机制，步兵车炸了之后步兵还在态势里。done阳哥和来哥给改对了。
2，仿真速度、前后端延迟。G
3，探测距离和射程。探测距离是JSON里面去改。done
4，巡飞弹自毁时间加大一点。而且被拦截弹拦截了，不想让它被拦截。搞成拦截弹不打飞机算了。
5，巡飞弹好像不飞了，不知道为啥。还是不飞。18点12分阳哥给整了一版之后巡飞弹终于是会飞了，可喜可贺。
6，蓝方装甲车还是上车了之后不走了。
7，Qt会跑没了，不过倒是问题不大。
8，中后期会跳好多“已存在指令某某某”，尚且不知道是为啥。
9，分数还没改，还不知道去哪改。
10，装备栏里没有巡飞弹，还得请求唐燃哥他们给弄一下。

============================================================================
2024年9月7日，好消息，吃了干扰确实会往回走，坏消息，怎么都不开火呢？

1，坦克炮不开火，研究一下是怎么回事儿。抽象，刚开始测AI demo的时候都还会开火呢。肉眼看着它进了LaunchMissile，过了createunit。经过调试，不是不发弹，发的，python这边态势里也有的。

============================================================================
2024年9月9日，怪起来了。

1，红方想让它打穿甲弹，但是没打出去。蓝方穿甲弹和高爆弹都打出去了，也有分数。需要进行两个隔离测试，一个是只开蓝方穿甲弹，一个是只开红方穿甲弹。
2，不是个办法，先把射程改了测一版看看。一个假设：可能是因为抄过来的发弹代码没检测距离，导致一直奔着最远的那个发，导致一直发不出去。合理推测，就是距离的问题，改成114514之后就发弹了。这波测试显示，打固定目标还是能打到的，高爆弹也能毁伤，但是移动目标打不到。
3，红方巡飞弹的部署位置有问题，部署到蓝方家里去了。需要检查一下。done
4，经查，蓝方上车之后步战车还是不动。经过来哥努力，尚未查明到底是为什么。20点32分。
5，经查，穿甲弹不毁伤就是弹速太慢，打过去敌人已经跑路了。试一下改成激光弹速，结果也没有好很多，经常是还离着一百多几百米。那么事情就清楚了，所谓不毁伤，其实是因为前面几轮都打不中，弹着点距离太远导致根本进不了判毁伤那个.进一步发现，全是间瞄。间瞄的话可不是打不中么。进一步测试发现，这个应该是平台运行逻辑的问题，而不是弹速度的问题，因为直瞄下弹速调到5倍光速，拓跋量并没有明显变化。直瞄和间瞄的脱靶量还是有区别的，直瞄50不到，间瞄150不到。一个想法：重写平台逻辑，不再是每一步看毁伤，而是每次开火来一个信号槽机制直接当地触发毁伤。要是远处就搞成间瞄那种。二个想法，阈值拉大。但是就抽象。【至此，发弹这茬就算是破案了】
6，经查，local的里面确实有重复指令，然后那个一开就全图都干扰了。全图干扰是SVN的锅，这东西大大减缓工作效率。这个问题应该主动地去解决。
7，经查，红方一直在轰房子，所以没有毁伤。然后轰对方的弹，全是重复劳动，去年处理过的问题，蚌。
8，观察问题很大，有无人机就都能看到，没有就啥也看不到，这就挺抽象的。虽然这可能是对的。

=================================================================================
2024年9月10日，给程序动手术算是动完了。还得把CD和弹量的check弄过来。
1，加一个类型转换的东西给它能够比较好。改完了现在，先测一把，看看真正的毁伤效果是啥样的，然后同步一下JSON，以git里面的那个为主。
2，还有遗留问题，这么玩儿的话其实不存在间瞄这一说了。以及得处理一下射程限制，不能为所欲为。
3，前端显示发现了但是给到python的探测池子里面没有东西。
4，进攻弹是能发出来的，鉴定为没啥毛病。只靠穿甲弹和导弹打出来300帧320：160的分数，至此，基本上毁伤的强度就算是够了。
5，JSON倒是改完了，但是新加的步兵部署不上了，不知道是为啥。

=================================================================================
2024年9月11日，写了一些我们自己的这边。主要是得重新想一下探测池子里面的东西怎么处理，要个什么数据结构。以及debug起来，看一下我们现在是个什么样的数据结构。

1，一个问题：导弹车防空的距离，包括无人机探测的距离，都是二维的还是三维的。
2，无人机探测范围改了之后好像并没有什么变化，得再研究一下。
3，好消息是，设一个ID让它绕着飞这个功能是对的。


=================================================================================
20240912.上午找阳哥讨论了一波。改探测器范围两个地方都改，无人机给了运动指令之后才能飞起来，初始给个高度应该能好使。

1，回头改一下毁伤，让防空对导弹的抗性大一些。
2，有了新发现，之前的框架还有潜力，稍微改一下__handle_相关的函数，很多功能就可以支持跟随了，比如无人机的圆形的绕飞。


==================================================================================
2024年9月13日。
1，得看干扰车的距离怎么算的，可能得加一些距离才能干扰到巡飞弹。


==================================================================================
20240919

check相关的算是基本整明白了，然后稍微写点“根据对面来的方向调整部署”的说法

1，折腾了很多上下车。奇怪，只有两个步兵下车了，别的不知道是怎么个说法。看了python里面的态势似乎对着呢，但是前端显示不对。
2，前端会闪退。
3，探测距离还是太长了，好像没改明白一样的。
4，应该实现的结果是，两边往中间直接A过去的话，红方打不过。
5，蓝方的拦截弹还是只拦截一波，后面不来了。甚至一波都不拦截了。

==================================================================================
20240920，继续。今天先完善一下红方的策略，至少让它能够平A。搞快点，这边基本完成之后就要赶紧考虑激活大模型那套，往上赶紧整了。
1，合理利用时间，平台那边不改代码的话就可以用release，来的比较快。
2，得改成步兵在房子里不吃子弹伤害。


===================================================================================
20240921，红方不走了。切了demo对比之后认为应该是python这边的问题。但是看了似乎没有问题。修了毁伤之后，现在确实是一个激情互秒的局面。

1，但是看了代码之后认为并没有问题，至少step_red没问题，而且它是前面几步能对，两百多步后开始不对了。
2，为啥jammer device会有弹量和CD？
3，开了干扰全图可见这一点并没有实现。这一点没实现的话干扰车有点太imbalance了
4，进房子的不被探测加成看起来是没有实现。不会又被盖了吧。
5，进攻弹一飞过来就把全图开了，有点抽象。


======================================================================================
20240923。现在小车开过去全给它杀完了。

1，啥东西？下车了之后再上车，有概率上不上去。
2，地面装备不走这个问题，说法是路径规划失败了。需要一个备用方案，不能一直这样。
3，空地导弹打不到东西哇，不过打不到也是好事。
4，应该花点时间好好校核一下JSON文件了，绷不住了。
5，开干扰全图可见这个也是个问题。

=================================================================================
20240924。一个理解：干扰范围加大一点好像是对蓝方有利。现在红方坦克直接冲蓝方步兵群好像是打不过的。

1，前端还是会闪退。后端会线程跑路，跑到Qt之外得任务管理器来关。
2，整理一下JSON需要改的东西：飞机类的探测范围2300，导弹那个的探测范围2300，干扰车的干扰范围3000，打无人机那个防空导弹的射程3000
3，整理一下代码里需要改的：步兵进房子不吃RPG，导弹拦截概率改一下。
4，确定了确实是没有全图可见。然后AGM不怎么打的中。

==================================================================================

20240925

==================================================================================

20240926

1，蓝方巡飞弹的使用得有个说法。
2，蓝方改成不要乱跑，得吃到静止打运动、集中打分散的优势。
3，毁伤概率改一下，别搞成这么刺激的激情互秒。
4，小车跑太快了，削一点儿速度。削了似乎没有用处，鉴定为寄。
5，房子里的兵怎么不开火了。

==================================================================================

20240929.房子里兵不开火这个事情算是解决了上次，是因为出现了某些奇怪的事情导致进房子瞬移了。

1，得给来哥搞一个一直上下车的东西。基本破案了，步兵下车之后会瞬移貌似，突出一个刺激。
2，毁伤还没来得及改。二〇二四年九月二十九日 20:00:43毁伤改了，看起来之前激情互秒是合理的，因为去年没找准原因，最后关头把概率改成0.6了，而随机出来的数全是0.8左右的。
3，改了一下发现，榴弹炮好像太过于IMBA了，往那里一站直接就是杀完了。那就是一方面改弹药种类，不给穿甲弹了，另一方面要求必须站着才能开火，再一个削弱移动速度。
4，房子抗高爆弹的作用确实是体现出来了。穿甲弹伤害还得调低，不然见面还是激情互秒。得调到互有胜负别都是互秒。
5，还有一个小bug，不打干扰车.这个倒是修了就好了



====================================================================================
20240930.好好看看巡飞弹是怎么个说法。

1，装甲车辆隐蔽的作用似乎并没有体现出来。
2，毁伤需要debug，看看隐蔽不行到底是为什么个不行法。
3，巡飞弹进攻指令果然不太行，这也太抽象了，真就每个功能都不行呗。加个标志位，发了进攻之后就不发别的了。加了仍然不行，基本可以确定是那个指令就是不行了。
3，由奢入俭难，平台bug如果依赖别人调，自己就不想调了。效率下降的厉害。
4，还需要一个“看见对方榴弹炮停下了再A”的机制，倒是应该不难实现。
5，新问题，“停下来”停不下来。算了我自己改吧。

=====================================================================================
20241001.来稍微修一会儿。逆天，平台里是直接转成数字的，算了，兼容这步我在python里面做好了。由于这个原因，去年的所有状态转换都是失效的（绷

=====================================================================================
20241003,继续，先把刹车那个事情整好，然后剩下的时间来搞搞场景编辑和网络通信那一类的。电脑放下面真的难受，草。

1，至此，测试得到两个结果，其一是确实可以强制停车了，其二是停车之后的迫榴炮确实是可以被无人机巡飞弹炸掉的。
